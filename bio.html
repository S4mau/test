<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lively Quiz â€“ Normal Mode+</title>
<style>
  :root{ --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.15); --speed:300ms; }
  *{box-sizing:border-box}
  body{ margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
    font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: linear-gradient(135deg, #8EC5FC 0%, #E0C3FC 100%);}
.wrap{ 
    width:min(820px,94vw); 
    /* Very dark transparent background */
    background: rgba(0, 0, 0, 0.85); 
    border-radius: 24px; 
    /* Muted, dark border (from the ground/earth tones) */
    border: 3px solid #553A2C; 
    /* REMOVED all aggressive glow shadows */
    box-shadow: 0 10px 20px rgba(0,0,0,0.5); 
    padding: 28px; 
}

  .top{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; flex-wrap:wrap; }
 .badge{ background:#222; color:#EEE; font-weight: 500; } 
#scoreBadge{ background:#2a5c1f00; color:#D4EDDA; font-weight: 500; }

  .timerRow{ display:flex; align-items:center; gap:10px; margin:8px 0 20px }
  #timerText{ font-weight:700 }
  .bar{ flex:1; height:10px; background:#eee; border-radius:999px; overflow:hidden; box-shadow: inset 0 0 0 1px rgba(0,0,0,.04); }
  .fill{ height:100%; width:100%; background:#ffb703; transition:width linear; }

 
 .card{ 
    /* Dark, muted background that is easy on the eyes */
    background: #181818; 
    color: #CCCCCC; /* Soft gray text (not pure white) */
    padding: 24px; 
    border-radius: var(--radius); 
    text-align: center; 
    font-weight: 700; 
    font-size: 22px; 
    min-height: 92px;
    display: flex; align-items: center; justify-content: center; 
    /* REMOVED all inner/outer glow shadows */
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.05); 
}
  .fade-in{ animation:fadeIn .28s ease both } .fade-out{ animation:fadeOut .22s ease both }
  @keyframes fadeIn{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }
  @keyframes fadeOut{ from{opacity:1} to{opacity:0; transform:translateY(-6px)} }

  .answers{ margin-top:16px; display:grid; grid-template-columns:1fr; gap:12px }
  @media (min-width:640px){ .answers{ grid-template-columns:1fr 1fr } }
  .btn{ border:none; border-radius:14px; padding:16px; font-size:18px; font-weight:700; color:#fff; cursor:pointer; transition:transform var(--speed), filter var(--speed), box-shadow var(--speed); box-shadow:0 6px 18px rgba(0,0,0,.08); }
  .btn:hover{ 
    /* Soft hover effect */
    transform: translateY(-2px); 
    filter: none; /* No brightness change */
    box-shadow: 0 4px 8px rgba(0,0,0,.4); /* Simple lift shadow */
}

  .btn:disabled{ opacity:.85; cursor:default; transform:none; filter:none }

 .correct{ background:#1E693F !important; color:#fff !important; } /* Darker Green */
.wrong{ background:#A32727 !important; color:#fff !important; animation:shake .22s linear 2 } /* Darker Red */

  @keyframes shake{ 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }
  .flash{ animation:flash 480ms ease both }
  @keyframes flash{ 0%{ box-shadow:0 0 0 0 rgba(40,167,69,.6) } 100%{ box-shadow:0 0 0 16px rgba(40,167,69,0) } }

  #board{ display:none; text-align:center; margin-top:10px;  color: white; }
  #board h2{ margin:8px 0 14px }
  .line{ opacity:0; transform:translateY(8px); transition:opacity .7s, transform .7s; font-size:18px; }
  .reveal{ opacity:1; transform:none }
  .actions{ margin-top:16px; display:flex; justify-content:center; gap:10px; flex-wrap:wrap }
  .ghost{ background:#2A1E29; color:#fff; border:none; border-radius:12px; padding:10px 16px; font-weight:800; cursor:pointer; transition:transform var(--speed), filter var(--speed); box-shadow:var(--shadow) }
  .ghost:hover{ transform:translateY(-1px) }

 /* 3. Button Colors (Pulled directly from the image tones) */
.c1 { background: #5E201B; } /* Muted Brick Red */
.c2 { background: #554422; } /* Muted Gold/Brown */
.c3 { background: #3C3C3C; } /* Dark Charcoal Gray */
.c4 { background: #4D453A; } /* Muted Earthy Brown */

  .stats{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
  .stat{ background:#222; color:#EEE; font-weight: 500; }
  body {
  background-image: url('assets/biology (1).jpg');
  background-size: cover;       /* fills the screen */
  background-position: center;  /* centers it */
  background-repeat: no-repeat; /* no tiling */
}




.header-title {
  text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
}

/* container for Menu + Fumo */
.header-right {
  display: flex;
  align-items: center;
  gap: 50px; /* space between Menu and Fumo */
}

/* Menu styling */
.menu-link {
  color: white;
  text-decoration: none;
  font-size: 0.9em;
  background: rgba(255,255,255,0.1);
  padding: 6px 12px;
  border-radius: 12px;
  transition: background 0.25s, transform 0.25s;
}

.menu-link:hover {
  background: rgba(255,255,255,0.25);
  transform: scale(1.05);
}


/* push page content below header */
body {
  margin-top: 70px;
}


header {
  /* existing stylesâ€¦ */
  box-shadow: 0 4px 8px rgba(0,0,0,0.25); /* current shadow */
}
header {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    /* NEW: Dark, moody, low-contrast gradient (Deep Red to Deep Purple) */
    background: linear-gradient(90deg, #4d0d0d, #330044); 
    
    color: white;
    padding: 15px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.8em;
    font-weight: bold;
    /* Soften the shadow so it doesn't look like a bright light source */
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    z-index: 9999;
}
</style>



<header>
  <div class="header-title"></div>
  
  <div class="header-right">
    <a href="index.html" class="menu-link">Menu</a>

  </div>
</header>

</head>
<body>
  <div class="wrap" id="app">
    <div class="top">
      <div class="badge" id="qBadge">Question 1/1</div>
      <div class="stats">
        <div class="badge" id="scoreBadge">Score: <span id="score">0</span></div>
        <div class="stat">Correct: <span id="correctCount">0</span></div>
        <div class="stat">Wrong: <span id="wrongCount">0</span></div>
        <div class="stat">Time: <span id="elapsed">00:00</span></div>
      </div>
    </div>

    <div class="card fade-in" id="question">Loadingâ€¦</div>

    <div class="answers" id="answers"></div>

    <div id="board">
      <h2>ðŸŽ‰ Final Score</h2>
      <div class="line" id="Lscore">Score: 0</div>
      <div class="line" id="Lcorrect">Correct: 0</div>
      <div class="line" id="Lwrong">Wrong: 0</div>
      <div class="line" id="Ltime">Total time: 00:00</div>
      <div class="line" id="Lavg">Avg / Q: 00:00</div>

      <div class="actions">
        <button class="ghost" id="retryShuffle">Retry (reshuffle)</button>
        <button class="ghost" id="retrySame">Retry (same order)</button>
      </div>
    </div>
  </div>

  <!-- audio hooks (point to your folder) -->
  <audio id="sClick" src="assets/sounds/sfx_click.ogg" preload="auto"></audio>
  <audio id="sCorrect" src="assets/sounds/Correct-1.ogg" preload="auto"></audio>
  <audio id="sWrong" src="assets/sounds/Incorrect-1.ogg" preload="auto"></audio>

<script>
/* ---------------- DATA ---------------- */
const QUESTIONS = [
   // Bai-1

  { q: "ADN Ä‘Æ°á»£c cáº¥u táº¡o tá»« cÃ¡c Ä‘Æ¡n vá»‹ nÃ o?", opts: ["Amino acid + Ä‘Æ°á»ng + nhÃ³m phosphate", "Nucleotide (Ä‘Æ°á»ng deoxyribose + base nito + nhÃ³m phosphate)", "Monosaccharide + base + axit", "Base nito + lipid"], correct: "Nucleotide (Ä‘Æ°á»ng deoxyribose + base nito + nhÃ³m phosphate)" },

  { q: "CÃ¡c cáº·p base bá»• sung trong ADN lÃ :", opts: ["A â€” C, G â€” T", "A â€” T, G â€” C", "A â€” G, T â€” C", "A â€” U, G â€” C"], correct: "A â€” T, G â€” C" },

  { q: "Äáº·c Ä‘iá»ƒm cáº¥u trÃºc chuá»—i ADN lÃ :", opts: ["Má»™t sá»£i tháº³ng song song", "Má»™t chuá»—i vÃ²ng kÃ­n", "Hai máº¡ch song song cÃ¹ng chiá»u", "Hai máº¡ch xoáº¯n kÃ©p, cháº¡y ngÆ°á»£c chiá»u (antiparallel)"], correct: "Hai máº¡ch xoáº¯n kÃ©p, cháº¡y ngÆ°á»£c chiá»u (antiparallel)" },

  { q: "Gen Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ :", opts: ["Má»™t Ä‘oáº¡n ARN mÃ£ hÃ³a tRNA", "Má»™t Ä‘oáº¡n ADN quy Ä‘á»‹nh cáº¥u trÃºc má»™t sáº£n pháº©m chá»©c nÄƒng (vÃ­ dá»¥ chuá»—i polypeptit)", "ToÃ n bá»™ ADN cá»§a táº¿ bÃ o", "PhÃ¢n tá»­ protein Ä‘iá»u hÃ²a táº¿ bÃ o"], correct: "Má»™t Ä‘oáº¡n ADN quy Ä‘á»‹nh cáº¥u trÃºc má»™t sáº£n pháº©m chá»©c nÄƒng (vÃ­ dá»¥ chuá»—i polypeptit)" },

  { q: "Kiá»ƒu gen khÃ¡c kiá»ƒu hÃ¬nh á»Ÿ chá»—:", opts: ["Kiá»ƒu gen lÃ  biá»ƒu hiá»‡n ra ngoÃ i, kiá»ƒu hÃ¬nh lÃ  mÃ£ di truyá»n bÃªn trong", "Kiá»ƒu gen lÃ  táº­p há»£p cÃ¡c alen; kiá»ƒu hÃ¬nh lÃ  biá»ƒu hiá»‡n tÃ­nh tráº¡ng", "Hai khÃ¡i niá»‡m giá»‘ng nhau", "Kiá»ƒu hÃ¬nh lÃ  ADN, kiá»ƒu gen lÃ  protein"], correct: "Kiá»ƒu gen lÃ  táº­p há»£p cÃ¡c alen; kiá»ƒu hÃ¬nh lÃ  biá»ƒu hiá»‡n tÃ­nh tráº¡ng" },

  { q: "CÆ¡ cháº¿ sao chÃ©p ADN Ä‘Æ°á»£c mÃ´ táº£ lÃ :", opts: ["Báº£o tá»“n hoÃ n toÃ n", "BÃ¡n báº£o tá»“n (má»—i phÃ¢n tá»­ con chá»©a má»™t máº¡ch máº¹ vÃ  má»™t máº¡ch má»›i)", "TÃ¡i táº¡o hoÃ n toÃ n", "Ngáº«u nhiÃªn ghÃ©p máº¡ch má»›i"], correct: "BÃ¡n báº£o tá»“n (má»—i phÃ¢n tá»­ con chá»©a má»™t máº¡ch máº¹ vÃ  má»™t máº¡ch má»›i)" },

  { q: "Enzyme chÃ­nh tham gia tá»•ng há»£p máº¡ch má»›i trong sao chÃ©p ADN lÃ :", opts: ["RNA polymerase", "DNA ligase", "DNA polymerase", "Aminoacyl-tRNA synthetase"], correct: "DNA polymerase" },

  { q: "PhiÃªn mÃ£ lÃ  quÃ¡ trÃ¬nh:", opts: ["Tá»•ng há»£p ADN tá»« ARN", "Tá»•ng há»£p ARN tá»« ADN", "Dá»‹ch mÃ£ ARN thÃ nh protein", "Sá»­a sai ADN"], correct: "Tá»•ng há»£p ARN tá»« ADN" },

  { q: "Má»™t bá»™ ba mÃ£ (codon) trÃªn mARN gá»“m:", opts: ["2 nucleotide", "3 nucleotide", "4 nucleotide", "1 nucleotide"], correct: "3 nucleotide" },

  { q: "Codon má»Ÿ Ä‘áº§u phá»• biáº¿n mÃ£ hÃ³a cho methionine lÃ :", opts: ["UAA", "UAG", "AUG", "UGA"], correct: "AUG" },

  { q: "CÃ¡c codon káº¿t thÃºc gá»“m:", opts: ["AUG, UUU, AAA", "UAA, UAG, UGA", "GAA, GAG, UGG", "UAC, UAU, UAA"], correct: "UAA, UAG, UGA" },

  { q: "Chá»©c nÄƒng chÃ­nh cá»§a tRNA lÃ :", opts: ["Mang thÃ´ng tin di truyá»n tá»« nhÃ¢n ra ribosome", "Mang amino acid tá»›i ribosome vÃ  báº¯t cáº·p anticodon vá»›i codon trÃªn mARN", "Táº¡o nÃªn thÃ nh pháº§n cáº¥u trÃºc cá»§a mÃ ng táº¿ bÃ o", "LÃ m nhiá»‡m vá»¥ enzym trong tá»•ng há»£p protein"], correct: "Mang amino acid tá»›i ribosome vÃ  báº¯t cáº·p anticodon vá»›i codon trÃªn mARN" },

  { q: "Ribosome cÃ³ vai trÃ²:", opts: ["Sao chÃ©p ADN", "BiÃªn dá»‹ch mARN thÃ nh chuá»—i polypeptit (dá»‹ch mÃ£)", "PhiÃªn mÃ£ ADN thÃ nh ARN", "Váº­n chuyá»ƒn protein ra khá»i táº¿ bÃ o"], correct: "BiÃªn dá»‹ch mARN thÃ nh chuá»—i polypeptit (dá»‹ch mÃ£)" },

  { q: "Má»™t tÃ­nh cháº¥t cá»§a mÃ£ di truyá»n lÃ :", opts: ["MÃ£ di truyá»n lÃ  duy nháº¥t cho má»—i amino acid", "MÃ£ di truyá»n lÃ  thoÃ¡i hÃ³a (nhiá»u codon mÃ£ cho cÃ¹ng 1 amino acid)", "MÃ£ di truyá»n hoÃ n toÃ n khÃ¡c á»Ÿ má»i sinh váº­t", "MÃ£ di truyá»n chá»‰ cÃ³ 2 codon"], correct: "MÃ£ di truyá»n lÃ  thoÃ¡i hÃ³a (nhiá»u codon mÃ£ cho cÃ¹ng 1 amino acid)" },

  { q: "Tráº­t tá»± Ä‘Ãºng cá»§a dÃ²ng cháº£y thÃ´ng tin di truyá»n lÃ :", opts: ["Protein â†’ ADN â†’ ARN", "ADN â†’ Protein â†’ ARN", "ADN â†’ ARN â†’ Protein", "ARN â†’ ADN â†’ Protein"], correct: "ADN â†’ ARN â†’ Protein" },

    //Bai 3
      { q: "Trong mÃ´ hÃ¬nh Operon Lac á»Ÿ vi khuáº©n E. coli, Operon lÃ  má»™t cá»¥m gen bao gá»“m nhá»¯ng thÃ nh pháº§n nÃ o sau Ä‘Ã¢y (theo thá»© tá»±)?", 
    opts: [
      "Gen Ä‘iá»u hÃ²a (R) â†’ VÃ¹ng váº­n hÃ nh (O) â†’ VÃ¹ng khá»Ÿi Ä‘á»™ng (P) â†’ Gen cáº¥u trÃºc.",
      "Gen Ä‘iá»u hÃ²a (R) â†’ VÃ¹ng khá»Ÿi Ä‘á»™ng (P) â†’ VÃ¹ng váº­n hÃ nh (O) â†’ Gen cáº¥u trÃºc.",
      "VÃ¹ng khá»Ÿi Ä‘á»™ng (P) â†’ VÃ¹ng váº­n hÃ nh (O) â†’ Gen cáº¥u trÃºc (Z, Y, A).",
      "Gen cáº¥u trÃºc (Z, Y, A) â†’ VÃ¹ng váº­n hÃ nh (O) â†’ VÃ¹ng khá»Ÿi Ä‘á»™ng (P)."
    ], 
    correct: "VÃ¹ng khá»Ÿi Ä‘á»™ng (P) â†’ VÃ¹ng váº­n hÃ nh (O) â†’ Gen cáº¥u trÃºc (Z, Y, A)." 
  },

  { q: "Chá»©c nÄƒng chÃ­nh cá»§a Gen Ä‘iá»u hÃ²a (R) trong há»‡ thá»‘ng Operon Lac lÃ  gÃ¬?", 
    opts: [
      "MÃ£ hÃ³a enzyme phÃ¢n giáº£i Ä‘Æ°á»ng lactose.",
      "MÃ£ hÃ³a protein á»©c cháº¿ (cháº¥t kiá»ƒm soÃ¡t).",
      "LÃ  nÆ¡i enzyme RNA polymerase bÃ¡m vÃ o.",
      "LÃ  nÆ¡i protein á»©c cháº¿ bÃ¡m vÃ o."
    ], 
    correct: "MÃ£ hÃ³a protein á»©c cháº¿ (cháº¥t kiá»ƒm soÃ¡t)" 
  },

  { q: "VÃ¹ng khá»Ÿi Ä‘á»™ng (P - Promoter) trong Operon Lac cÃ³ vai trÃ²:", 
    opts: [
      "NÆ¡i RNA polymerase bÃ¡m vÃ o vÃ  báº¯t Ä‘áº§u phiÃªn mÃ£.",
      "NÆ¡i protein á»©c cháº¿ bÃ¡m vÃ o.",
      "MÃ£ hÃ³a enzyme cho táº¿ bÃ o.",
      "NÆ¡i lactose liÃªn káº¿t."
    ], 
    correct: "NÆ¡i RNA polymerase bÃ¡m vÃ o vÃ  báº¯t Ä‘áº§u phiÃªn mÃ£." 
  },

  { q: "VÃ¹ng váº­n hÃ nh (O - Operator) trong Operon Lac cÃ³ vai trÃ²:", 
    opts: [
      "MÃ£ hÃ³a cÃ¡c enzyme.",
      "Tá»•ng há»£p protein á»©c cháº¿.",
      "Vá»‹ trÃ­ liÃªn káº¿t cá»§a protein á»©c cháº¿.",
      "NÆ¡i khá»Ÿi Ä‘áº§u tá»•ng há»£p DNA."
    ], 
    correct: "Vá»‹ trÃ­ liÃªn káº¿t cá»§a protein á»©c cháº¿." 
  },

  { q: "Ba gen cáº¥u trÃºc trong Operon Lac lÃ  Z, Y, A. Chá»©c nÄƒng chung cá»§a cÃ¡c gen nÃ y lÃ :", 
    opts: [
      "Sáº£n xuáº¥t protein á»©c cháº¿.",
      "Äiá»u hÃ²a tá»‘c Ä‘á»™ phiÃªn mÃ£.",
      "MÃ£ hÃ³a cÃ¡c enzyme tham gia chuyá»ƒn hÃ³a vÃ  váº­n chuyá»ƒn lactose.",
      "Váº­n chuyá»ƒn cÃ¡c cháº¥t dinh dÆ°á»¡ng khÃ¡c vÃ o táº¿ bÃ o."
    ], 
    correct: "MÃ£ hÃ³a cÃ¡c enzyme tham gia chuyá»ƒn hÃ³a vÃ  váº­n chuyá»ƒn lactose." 
  },

  { q: "Khi mÃ´i trÆ°á»ng khÃ´ng cÃ³ lactose, Operon Lac á»Ÿ vi khuáº©n E. coli sáº½ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?", 
    opts: [
      "RNA polymerase gáº¯n vÃ o P vÃ  phiÃªn mÃ£ gen cáº¥u trÃºc.",
      "Lactose gáº¯n vÃ o protein á»©c cháº¿ lÃ m nÃ³ bá»‹ báº¥t hoáº¡t.",
      "Protein á»©c cháº¿ bÃ¡m vÃ o O, ngÄƒn cáº£n RNA polymerase phiÃªn mÃ£.",
      "Protein á»©c cháº¿ bá»‹ phÃ¢n há»§y, khÃ´ng cÃ²n tÃ¡c dá»¥ng."
    ], 
    correct: "Protein á»©c cháº¿ bÃ¡m vÃ o O, ngÄƒn cáº£n RNA polymerase phiÃªn mÃ£." 
  },

  { q: "Trong cÆ¡ cháº¿ Ä‘iá»u hÃ²a Operon Lac, lactose Ä‘Ã³ng vai trÃ² lÃ :", 
    opts: [
      "Cháº¥t á»©c cháº¿.",
      "Cháº¥t cáº£m á»©ng (Inducer).",
      "Cháº¥t hoáº¡t hÃ³a.",
      "Protein á»©c cháº¿."
    ], 
    correct: "Cháº¥t cáº£m á»©ng (Inducer)" 
  },

  { q: "Khi cÃ³ lactose trong mÃ´i trÆ°á»ng nuÃ´i cáº¥y, hoáº¡t Ä‘á»™ng nÃ o sau Ä‘Ã¢y xáº£y ra?", 
    opts: [
      "Protein á»©c cháº¿ váº«n bÃ¡m vÃ o O, ngÄƒn phiÃªn mÃ£.",
      "Gen Ä‘iá»u hÃ²a (R) dá»«ng hoáº¡t Ä‘á»™ng.",
      "Lactose (cháº¥t cáº£m á»©ng) liÃªn káº¿t vá»›i protein á»©c cháº¿, lÃ m protein á»©c cháº¿ thay Ä‘á»•i cáº¥u hÃ¬nh vÃ  khÃ´ng bÃ¡m Ä‘Æ°á»£c vÃ o O.",
      "RNA polymerase khÃ´ng thá»ƒ bÃ¡m vÃ o P."
    ], 
    correct: "Lactose (cháº¥t cáº£m á»©ng) liÃªn káº¿t vá»›i protein á»©c cháº¿, lÃ m protein á»©c cháº¿ thay Ä‘á»•i cáº¥u hÃ¬nh vÃ  khÃ´ng bÃ¡m Ä‘Æ°á»£c vÃ o O." 
  },

  { q: "Khi Operon Lac Ä‘Æ°á»£c 'báº­t' (cÃ³ lactose), enzyme nÃ o sáº½ hoáº¡t Ä‘á»™ng Ä‘á»ƒ tá»•ng há»£p mARN tá»« gen cáº¥u trÃºc?", 
    opts: [
      "DNA polymerase.",
      "Enzyme ligase.",
      "RNA polymerase.",
      "Enzyme cáº¯t giá»›i háº¡n."
    ], 
    correct: "RNA polymerase." 
  },

  { q: "Má»¥c Ä‘Ã­ch cuá»‘i cÃ¹ng cá»§a cÆ¡ cháº¿ Ä‘iá»u hÃ²a biá»ƒu hiá»‡n gen lÃ  gÃ¬ (nhÆ° trong vÃ­ dá»¥ Operon Lac)?", 
    opts: [
      "Tiáº¿t kiá»‡m nÄƒng lÆ°á»£ng báº±ng cÃ¡ch chá»‰ tá»•ng há»£p enzyme khi cáº§n thiáº¿t (cÃ³ lactose).",
      "LuÃ´n luÃ´n giá»¯ tá»‘c Ä‘á»™ tá»•ng há»£p protein á»Ÿ má»©c tá»‘i Ä‘a.",
      "NgÄƒn cáº£n sá»± Ä‘á»™t biáº¿n gen.",
      "PhÃ¢n há»§y cÃ¡c protein dÆ° thá»«a."
    ], 
    correct: "Tiáº¿t kiá»‡m nÄƒng lÆ°á»£ng báº±ng cÃ¡ch chá»‰ tá»•ng há»£p enzyme khi cáº§n thiáº¿t (cÃ³ lactose)." 
  },



  //bai-4
 
  { q: "Äá»™t biáº¿n gen lÃ  sá»± thay Ä‘á»•i trong cáº¥u trÃºc cá»§a gen, liÃªn quan Ä‘áº¿n:", 
    opts:["Sá»‘ lÆ°á»£ng nhiá»…m sáº¯c thá»ƒ","Cáº¥u trÃºc nhiá»…m sáº¯c thá»ƒ","TrÃ¬nh tá»± nucleotit trÃªn gen","Sá»± sáº¯p xáº¿p láº¡i cÃ¡c gen"], 
    correct:"TrÃ¬nh tá»± nucleotit trÃªn gen" },

  { q: "Trong cÃ¡c loáº¡i Ä‘á»™t biáº¿n gen sau, loáº¡i nÃ o khÃ´ng lÃ m thay Ä‘á»•i sá»‘ lÆ°á»£ng nucleotit cá»§a gen?", 
    opts:["Máº¥t má»™t cáº·p nucleotit","ThÃªm má»™t cáº·p nucleotit","Thay tháº¿ má»™t cáº·p nucleotit","Máº¥t nhiá»u cáº·p nucleotit"], 
    correct:"Thay tháº¿ má»™t cáº·p nucleotit" },

  { q: "Dáº¡ng Ä‘á»™t biáº¿n nÃ o thÆ°á»ng gÃ¢y háº­u quáº£ nghiÃªm trá»ng nháº¥t vÃ¬ lÃ m thay Ä‘á»•i khung Ä‘á»c mÃ£ di truyá»n (Ä‘á»c sai toÃ n bá»™ tá»« Ä‘iá»ƒm Ä‘á»™t biáº¿n trá»Ÿ vá» sau)?", 
    opts:["Thay tháº¿ má»™t cáº·p nucleotit","Äá»™t biáº¿n vÃ´ nghÄ©a (táº¡o mÃ£ káº¿t thÃºc)","Äá»™t biáº¿n Ä‘á»“ng nghÄ©a (khÃ´ng lÃ m thay Ä‘á»•i a.a)","ThÃªm hoáº·c máº¥t má»™t cáº·p nucleotit"], 
    correct:"ThÃªm hoáº·c máº¥t má»™t cáº·p nucleotit" },

  { q: "Háº­u quáº£ cá»§a Ä‘á»™t biáº¿n vÃ´ nghÄ©a (Nonsense) lÃ :", 
    opts:["MÃ£ hÃ³a cho má»™t axit amin khÃ¡c","KhÃ´ng lÃ m thay Ä‘á»•i axit amin nÃ o","Táº¡o ra mÃ£ káº¿t thÃºc, lÃ m chuá»—i polypeptide bá»‹ ngáº¯n hÆ¡n","LÃ m kÃ©o dÃ i chuá»—i polypeptide"], 
    correct:"Táº¡o ra mÃ£ káº¿t thÃºc, lÃ m chuá»—i polypeptide bá»‹ ngáº¯n hÆ¡n" },

  { q: "TÃ¡c nhÃ¢n hÃ³a há»c 5-BU (5-bromouracil) gÃ¢y Ä‘á»™t biáº¿n gen báº±ng cÃ¡ch thay tháº¿ cáº·p A-T thÃ nh cáº·p G-C thÃ´ng qua viá»‡c:", 
    opts:["GÃ¢y Ä‘á»©t gÃ£y DNA","ThÃºc Ä‘áº©y quÃ¡ trÃ¬nh tÃ¡i báº£n","GÃ¢y táº¡o dimer timin dÆ°á»›i tia UV","GÃ¢y ra dáº¡ng hiáº¿m cá»§a nucleotit vÃ  báº¯t cáº·p sai"], 
    correct:"GÃ¢y ra dáº¡ng hiáº¿m cá»§a nucleotit vÃ  báº¯t cáº·p sai" }
];



/* ---------------- STATE ---------------- */
let order = [];
let qi = 0;
let score = 0;
let correctCount = 0;
let wrongCount = 0;
let startTime = null;
let questionStart = null;
let elapsedInterval = null;
let lastOrderSaved = []; // for "same order" retry

/* ---------------- DOM ---------------- */
const qBadge = document.getElementById('qBadge');
const scoreBadge = document.getElementById('score');
const correctBadge = document.getElementById('correctCount');
const wrongBadge = document.getElementById('wrongCount');
const questionEl = document.getElementById('question');
const answersEl = document.getElementById('answers');
const elapsedEl = document.getElementById('elapsed');
const board = document.getElementById('board');
const Lscore = document.getElementById('Lscore');
const Lcorrect = document.getElementById('Lcorrect');
const Lwrong = document.getElementById('Lwrong');
const Ltime = document.getElementById('Ltime');
const Lavg = document.getElementById('Lavg');
const retryShuffle = document.getElementById('retryShuffle');
const retrySame = document.getElementById('retrySame');

const sClick = document.getElementById('sClick');
const sCorrect = document.getElementById('sCorrect');
const sWrong = document.getElementById('sWrong');

/* ---------------- UTIL ---------------- */
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}
function formatTime(ms){
  const s = Math.floor(ms/1000);
  const mm = String(Math.floor(s/60)).padStart(2,'0');
  const ss = String(s%60).padStart(2,'0');
  return `${mm}:${ss}`;
}

/* ---------------- QUIZ FLOW ---------------- */
function start(reshuffle=true, preserveOrder=false){
  // reset stats
  score = 0; correctCount = 0; wrongCount = 0;
  qi = 0;

  // create order
  order = Array.from({length: QUESTIONS.length}, (_,i)=>i);
  if(reshuffle) shuffle(order);
  if(preserveOrder && lastOrderSaved.length===order.length) order = [...lastOrderSaved];
  lastOrderSaved = [...order];

  // timer
  startTime = Date.now();
  questionStart = Date.now();
  if(elapsedInterval) clearInterval(elapsedInterval);
  elapsedInterval = setInterval(()=> {
    elapsedEl.textContent = formatTime(Date.now()-startTime);
  }, 250);

  // UI
  board.style.display = 'none';
  questionEl.style.display = 'flex';
  answersEl.style.display = 'grid';
  updateBadges();
  renderQuestion();
}

function renderQuestion(){
  if(qi >= order.length){ return finish(); }

  // animate swap
  questionEl.classList.remove('fade-in'); questionEl.classList.add('fade-out');
  setTimeout(()=>{
    const q = QUESTIONS[order[qi]];
    questionEl.textContent = q.q;
    questionEl.classList.remove('fade-out'); questionEl.classList.add('fade-in');

    qBadge.textContent = `Question ${qi+1}/${order.length}`;

    answersEl.innerHTML = '';
    const opts = shuffle([...q.opts]); // randomize answer order
    const colorClasses = shuffle(['c1','c2','c3','c4']);
    opts.forEach((opt, idx)=>{
      const btn = document.createElement('button');
      btn.className = `btn ${colorClasses[idx]}`;
      btn.textContent = opt;
      btn.dataset.correct = (opt === q.correct) ? '1':'0';
      // play click sound on mousedown for snappy feel, but still evaluate on click
      btn.addEventListener('mousedown', ()=> { try { sClick.currentTime=0; sClick.play(); } catch(e){} });
      btn.addEventListener('click', ()=> choose(btn));
      answersEl.appendChild(btn);
    });

    // mark question start time
    questionStart = Date.now();
  }, 180);
}

function lockAnswers(){
  document.querySelectorAll('.btn').forEach(b=> b.disabled = true);
}

function choose(btn){
  if(btn.disabled) return;
  lockAnswers();

  const isCorrect = btn.dataset.correct === '1';

  // compute time per question if needed later
  const qTime = Date.now() - questionStart;

  if(isCorrect){
    btn.classList.add('correct','flash');
    score += 1;
    correctCount += 1;
    try { sCorrect.currentTime = 0; sCorrect.play(); } catch(e){}
    // highlight only chosen correct (no other wrong highlight needed)
    document.querySelectorAll('.btn').forEach(b => {
      if(b.dataset.correct === '1') b.classList.add('correct');
      b.disabled = true;
    });
  } else {
    wrongCount += 1;
    try { sWrong.currentTime = 0; sWrong.play(); } catch(e){}
    // mark ALL wrong answers red and the correct one green
    document.querySelectorAll('.btn').forEach(b=>{
      if(b.dataset.correct === '1'){
        b.classList.add('correct');
      }else{
        b.classList.add('wrong');
      }
      b.disabled = true;
    });
    // also add small red effect to the clicked button (it already gets wrong class)
  }

  updateBadges();
  // next question after a pause so user sees feedback
  setTimeout(()=> {
    qi++;
    renderQuestion();
  }, 950);
}

function finish(){
  clearInterval(elapsedInterval);
  const totalMs = Date.now() - startTime;
  questionEl.style.display = 'none';
  answersEl.style.display = 'none';
  board.style.display = 'block';

  // fill final stats
  Lscore.textContent = `Score: ${score} / ${QUESTIONS.length}`;
  Lcorrect.textContent = `Correct: ${correctCount}`;
  Lwrong.textContent = `Wrong: ${wrongCount}`;
  Ltime.textContent = `Total time: ${formatTime(totalMs)}`;
  const avgMs = totalMs / QUESTIONS.length;
  Lavg.textContent = `Avg / Q: ${formatTime(Math.round(avgMs))}`;

  // reveal animations (stagger)
  [Lscore,Lcorrect,Lwrong,Ltime,Lavg].forEach((el, i) => {
    setTimeout(()=> el.classList.add('reveal'), 80 * (i+1));
  });
  // show retry buttons enabled
  retryShuffle.disabled = false;
  retrySame.disabled = false;
}

function updateBadges(){
  document.getElementById('score').textContent = score;
  correctBadge.textContent = correctCount;
  wrongBadge.textContent = wrongCount;
}

/* ---------------- RESTART BUTTON HOOKS ---------------- */
retryShuffle.addEventListener('click', ()=> {
  retryShuffle.disabled = true; retrySame.disabled = true;
  start(true, false);
});
retrySame.addEventListener('click', ()=> {
  retryShuffle.disabled = true; retrySame.disabled = true;
  start(false, true);
});

/* ---------------- BOOT ---------------- */
start(true);




</script>
</body>
</html>
